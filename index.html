<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kazi Mashinani - Rural Job Opportunities</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1e40af;
            --secondary-color: #3b82f6;
            --accent-color: #60a5fa;
            --light-blue: #dbeafe;
            --text-color: #1f2937;
            --light-bg: #f8fafc;
            --white: #ffffff;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gradient-1: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px rgba(0,0,0,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        header {
            background: var(--gradient-1);
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .logo h1 {
            font-size: 1.6rem;
            font-weight: 800;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .language-switcher {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            color: white;
            margin-right: 15px;
        }

        .language-switcher:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .language-flag {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        /* Navigation */
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 20px;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            margin-top: -1rem;
            position: relative;
            z-index: 10;
        }

        .nav-item {
            padding: 0.8rem 1.5rem;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e2e8f0;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-item:hover, .nav-item.active {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
            flex: 1;
        }

        .container {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid #e2e8f0;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 2rem;
            color: var(--primary-color);
        }

        .section-header i {
            font-size: 1.5rem;
        }

        .section-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Search Bar */
        .search-container {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
            border: 1px solid #e2e8f0;
        }

        .search-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 1rem;
            align-items: end;
        }

        @media (max-width: 768px) {
            .search-form {
                grid-template-columns: 1fr;
            }
        }

        /* Job Listings */
        .job-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .job-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #e2e8f0;
        }

        .job-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .job-title {
            font-size: 1.2rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .job-category {
            background: var(--light-blue);
            color: var(--primary-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .job-description {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .job-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-size: 0.9rem;
        }

        .communication {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .job-actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
        }

        .btn-action {
            padding: 6px 10px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .btn-edit {
            background: var(--warning);
            color: white;
        }

        .btn-edit:hover {
            background: #d97706;
        }

        .btn-delete {
            background: var(--danger);
            color: white;
        }

        .btn-delete:hover {
            background: #dc2626;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.9rem;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-call {
            background: #0078D4;
            color: white;
        }

        .btn-call:hover {
            background: #0066b8;
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
        }

        .btn-whatsapp:hover {
            background: #128C7E;
        }

        .btn-logout {
            background: var(--danger);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .btn-logout:hover {
            background: #dc2626;
        }

        /* Welcome Section */
        .welcome-section {
            text-align: center;
            padding: 3rem 2rem;
            background: var(--gradient-1);
            color: white;
            border-radius: 16px;
            margin-bottom: 2rem;
        }

        .welcome-section h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .welcome-section p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Professional Blog Section */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .blog-card {
            background: white;
            border-radius: 12px;
            padding: 0;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }

        .blog-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .blog-image {
            height: 180px;
            background-size: cover;
            background-position: center;
        }

        .blog-content {
            padding: 1.5rem;
        }

        .blog-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: 700;
            line-height: 1.3;
        }

        .blog-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .blog-read-more {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--secondary-color);
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .blog-read-more:hover {
            color: var(--primary-color);
            gap: 0.7rem;
        }

        /* Full Blog Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            margin: 2rem auto;
            width: 90%;
            max-width: 800px;
            border-radius: 16px;
            box-shadow: var(--shadow-xl);
            overflow: hidden;
        }

        .modal-header {
            padding: 1.5rem;
            background: var(--gradient-1);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 2rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .blog-full-image {
            width: 100%;
            height: 300px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .blog-full-title {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .blog-full-content {
            line-height: 1.8;
            color: #444;
        }

        .blog-full-content p {
            margin-bottom: 1rem;
        }

        .blog-full-content h3 {
            margin: 1.5rem 0 1rem;
            color: var(--primary-color);
        }

        /* Profile Section */
        .profile-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 768px) {
            .profile-content {
                grid-template-columns: 1fr;
            }
        }

        .profile-info, .profile-form {
            background: var(--light-bg);
            padding: 1.5rem;
            border-radius: 12px;
        }

        .profile-form {
            background: white;
            border: 2px solid var(--light-blue);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            background: var(--primary-color);
            color: white;
            padding: 2rem 0;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .footer-contact {
            display: flex;
            gap: 1.5rem;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .contact-icon:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }

        /* Loading and Messages */
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        .message {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            text-align: center;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .nav-container {
                justify-content: center;
            }

            .job-grid, .blog-grid {
                grid-template-columns: 1fr;
            }

            .welcome-section h1 {
                font-size: 2rem;
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-hands-helping"></i>
                <h1 data-en="Kazi Mashinani" data-sw="Kazi Mashinani">Kazi Mashinani</h1>
            </div>
            <div style="display: flex; align-items: center;">
                <div class="language-switcher" onclick="toggleLanguage()">
                    <div class="language-flag">
                        <span id="currentFlag">ðŸ‡°ðŸ‡ª</span>
                    </div>
                    <div class="language-name" id="currentLanguage">Kiswahili</div>
                </div>
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <div id="userName">Aquarech Limited</div>
                        <button class="btn-logout" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> <span data-en="Logout" data-sw="Toka">Toka</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="nav-container">
        <div class="nav-item active" onclick="showSection('home')">
            <i class="fas fa-home"></i> <span data-en="Home" data-sw="Nyumbani">Nyumbani</span>
        </div>
        <div class="nav-item" onclick="showSection('jobs')">
            <i class="fas fa-briefcase"></i> <span data-en="Available Jobs" data-sw="Kazi Zilizopo">Kazi Zilizopo</span>
        </div>
        <div class="nav-item" onclick="showSection('profile')">
            <i class="fas fa-user"></i> <span data-en="My Profile" data-sw="Wasifu Wangu">Wasifu Wangu</span>
        </div>
        <div class="nav-item" id="postJobNav" onclick="showSection('post')">
            <i class="fas fa-plus-circle"></i> <span data-en="Post Job" data-sw="Tanga Kazi">Tanga Kazi</span>
        </div>
        <div class="nav-item" id="employeesNav" onclick="showSection('employees')">
            <i class="fas fa-users"></i> <span data-en="Find Workers" data-sw="Tafuta Wafanyikazi">Tafuta Wafanyikazi</span>
        </div>
    </div>

    <div class="main-container">
        <!-- Home Section -->
        <section id="homeSection">
            <div class="welcome-section">
                <h1 id="welcomeMessage" data-en="Welcome to Kazi Mashinani!" data-sw="Karibu Kazi Mashinani!">Karibu Kazi Mashinani!</h1>
                <p data-en="Connecting rural workers with employment opportunities" data-sw="Kuunganisha wafanyikazi vijijini na fursa za ajira">Kuunganisha wafanyikazi vijijini na fursa za ajira</p>
            </div>

            <!-- Blog Section -->
            <div class="container">
                <div class="section-header">
                    <i class="fas fa-newspaper"></i>
                    <h2 data-en="Latest Updates & Tips" data-sw="Taarifa Za Hivi Karibuni na Vidokezo">Taarifa Za Hivi Karibuni na Vidokezo</h2>
                </div>
                
                <div class="blog-grid" id="blogContent">
                    <!-- Blog content will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Jobs Section -->
        <section id="jobsSection" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <i class="fas fa-briefcase"></i>
                    <h2 data-en="Available Job Opportunities" data-sw="Fursa Za Kazi Zilizopo">Fursa Za Kazi Zilizopo</h2>
                </div>
                
                <!-- Search Bar for Employees -->
                <div id="employeeSearch" class="search-container">
                    <form class="search-form" onsubmit="filterJobs(event)">
                        <div class="form-group">
                            <label data-en="Search by Position" data-sw="Tafuta kwa Nafasi">Tafuta kwa Nafasi</label>
                            <input type="text" id="positionSearch" placeholder="Search by job title...">
                        </div>
                        <div class="form-group">
                            <label data-en="Filter by Location" data-sw="Chagua kwa Eneo">Chagua kwa Eneo</label>
                            <input type="text" id="locationSearch" placeholder="Filter by location...">
                        </div>
                        <div>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-search"></i> <span data-en="Search" data-sw="Tafuta">Tafuta</span>
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="job-grid" id="jobListings">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> <span data-en="Loading jobs..." data-sw="Inapakia kazi...">Inapakia kazi...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profileSection" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <i class="fas fa-user"></i>
                    <h2 data-en="My Profile" data-sw="Wasifu Wangu">Wasifu Wangu</h2>
                </div>
                
                <div class="profile-content" id="profileContent">
                    <!-- Profile content will be loaded here -->
                </div>

                <!-- Employer's Posted Jobs -->
                <div id="employerJobsSection" style="margin-top: 2rem;">
                    <div class="section-header">
                        <i class="fas fa-list"></i>
                        <h2 data-en="My Posted Jobs" data-sw="Kazi Nilizotangaza">Kazi Nilizotangaza</h2>
                    </div>
                    <div class="job-grid" id="employerJobListings">
                        <!-- Employer's jobs will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Post Job Section -->
        <section id="postJobSection" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <i class="fas fa-plus-circle"></i>
                    <h2 data-en="Post a Job Opportunity" data-sw="Tanga Fursa Ya Kazi">Tanga Fursa Ya Kazi</h2>
                </div>
                
                <form id="jobForm">
                    <div class="form-group">
                        <label data-en="Job Title *" data-sw="Kichwa Cha Kazi *">Kichwa Cha Kazi *</label>
                        <input type="text" id="jobTitle" required data-en-placeholder="e.g., Farm Worker, Construction Helper" data-sw-placeholder="K.m. Mfanyakazi Shambani, Msaidizi Ujenzi">
                    </div>
                    
                    <div class="form-group">
                        <label data-en="Job Description *" data-sw="Maelezo Ya Kazi *">Maelezo Ya Kazi *</label>
                        <textarea id="jobDescription" required rows="4" data-en-placeholder="Describe the job responsibilities and requirements..." data-sw-placeholder="Eleza majukumu ya kazi na mahitaji..."></textarea>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label data-en="Location *" data-sw="Eneo *">Eneo *</label>
                            <input type="text" id="jobLocation" required data-en-placeholder="e.g., Nairobi, Nakuru" data-sw-placeholder="K.m. Nairobi, Nakuru">
                        </div>
                        <div class="form-group">
                            <label data-en="Category" data-sw="Aina">Aina</label>
                            <select id="jobCategory">
                                <option value="general" data-en="General" data-sw="Jumla">Jumla</option>
                                <option value="agriculture" data-en="Agriculture" data-sw="Kilimo">Kilimo</option>
                                <option value="construction" data-en="Construction" data-sw="Ujenzi">Ujenzi</option>
                                <option value="domestic" data-en="Domestic Work" data-sw="Kazi Ya Nyumbani">Kazi Ya Nyumbani</option>
                                <option value="driving" data-en="Driving" data-sw="Udereva">Udereva</option>
                                <option value="retail" data-en="Retail" data-sw="Biashara">Biashara</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label data-en="Phone Number *" data-sw="Nambari ya Simu *">Nambari ya Simu *</label>
                            <input type="tel" id="jobPhone" required placeholder="0712345678">
                        </div>
                        <div class="form-group">
                            <label data-en="Business Type" data-sw="Aina ya Biashara">Aina ya Biashara</label>
                            <input type="text" id="businessType" data-en-placeholder="e.g., Farm, Construction Company" data-sw-placeholder="K.m. Shamba, Kampuni ya Ujenzi">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-paper-plane"></i> <span data-en="Post Job" data-sw="Tanga Kazi">Tanga Kazi</span>
                    </button>
                </form>
            </div>
        </section>

        <!-- Employees Section -->
        <section id="employeesSection" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <i class="fas fa-users"></i>
                    <h2 data-en="Available Workers" data-sw="Wafanyikazi Walioopo">Wafanyikazi Walioopo</h2>
                </div>
                
                <div class="job-grid" id="employeeListings">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> <span data-en="Loading workers..." data-sw="Inapakia wafanyikazi...">Inapakia wafanyikazi...</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Full Blog Modal -->
    <div class="modal" id="blogModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalBlogTitle">Blog Title</h2>
                <button class="close-modal" onclick="closeBlogModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBlogBody">
                <!-- Blog content will be loaded here -->
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div>
                <h3 data-en="Kazi Mashinani - Connecting Rural Workers with Opportunities" data-sw="Kazi Mashinani - Kuunganisha Wafanyikazi Vijijini na Fursa">Kazi Mashinani - Kuunganisha Wafanyikazi Vijijini na Fursa</h3>
            </div>
            <div class="footer-contact">
                <div class="contact-icon" onclick="contactPhone()">
                    <i class="fas fa-phone"></i>
                </div>
                <div class="contact-icon" onclick="contactEmail()">
                    <i class="fas fa-envelope"></i>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const API_BASE_URL = 'https://backita.onrender.com';
        let currentUser = null;
        let currentJobs = [];
        let currentEmployees = [];
        let currentLanguage = 'en';
        let userJobs = [];
        let currentEditingJobId = null;

        // Check authentication on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthentication();
        });

        function checkAuthentication() {
            const token = localStorage.getItem('token');
            const userData = localStorage.getItem('user');
            
            if (!token || !userData) {
                window.location.href = 'auth.html';
                return;
            }
            
            try {
                currentUser = JSON.parse(userData);
                
                // Set language from localStorage or default to English
                const savedLanguage = localStorage.getItem('preferredLanguage');
                if (savedLanguage) {
                    currentLanguage = savedLanguage;
                }
                updateLanguageDisplay();
                translatePage();
                
                initializeApp();
            } catch (error) {
                console.error('Error parsing user data:', error);
                logout();
            }
        }

        function initializeApp() {
            // Update UI with user info
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('welcomeMessage').textContent = currentLanguage === 'en' 
                ? `Welcome ${currentUser.name}!` 
                : `Karibu ${currentUser.name}!`;
            
            // Show/hide features based on role
            if (currentUser.role === 'employer') {
                document.getElementById('postJobNav').style.display = 'flex';
                document.getElementById('employeesNav').style.display = 'flex';
            }
            
            // Load initial data
            loadBlogs();
            loadJobs();
            loadEmployees();
            
            // Setup event listeners
            document.getElementById('jobForm').addEventListener('submit', handleJobPost);
        }

        // Language functions
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'sw' : 'en';
            localStorage.setItem('preferredLanguage', currentLanguage);
            updateLanguageDisplay();
            translatePage();
            
            // Update welcome message
            document.getElementById('welcomeMessage').textContent = currentLanguage === 'en' 
                ? `Welcome ${currentUser.name}!` 
                : `Karibu ${currentUser.name}!`;
                
            // Reload content with new language
            loadBlogs();
            loadJobs();
        }

        function updateLanguageDisplay() {
            const flagElement = document.getElementById('currentFlag');
            const languageElement = document.getElementById('currentLanguage');
            
            if (currentLanguage === 'en') {
                flagElement.textContent = 'ðŸ‡ºðŸ‡¸';
                languageElement.textContent = 'English';
            } else {
                flagElement.textContent = 'ðŸ‡°ðŸ‡ª';
                languageElement.textContent = 'Kiswahili';
            }
        }

        function translatePage() {
            // Translate text content
            const elements = document.querySelectorAll('[data-en][data-sw]');
            elements.forEach(element => {
                if (currentLanguage === 'en') {
                    element.textContent = element.getAttribute('data-en');
                } else {
                    element.textContent = element.getAttribute('data-sw');
                }
            });

            // Translate placeholders
            const placeholderElements = document.querySelectorAll('[data-en-placeholder][data-sw-placeholder]');
            placeholderElements.forEach(element => {
                if (currentLanguage === 'en') {
                    element.placeholder = element.getAttribute('data-en-placeholder');
                } else {
                    element.placeholder = element.getAttribute('data-sw-placeholder');
                }
            });

            // Translate select options
            const selectElements = document.querySelectorAll('select option');
            selectElements.forEach(option => {
                if (option.hasAttribute('data-en') && option.hasAttribute('data-sw')) {
                    if (currentLanguage === 'en') {
                        option.textContent = option.getAttribute('data-en');
                    } else {
                        option.textContent = option.getAttribute('data-sw');
                    }
                }
            });
        }

        // Blog functions
        async function loadBlogs() {
            try {
                // Sample blog data with full articles
                const blogData = [
                    {
                        id: 1,
                        title: currentLanguage === 'en' ? 'Agriculture Opportunities Growing in Rural Areas' : 'Fursa za Kilimo Zinakua Vijijini',
                        description: currentLanguage === 'en' 
                            ? 'Discover the latest farming and agricultural job opportunities across rural Kenya. From seasonal farm work to permanent positions.' 
                            : 'Gundua fursa mpya za kazi za kilimo na ufugaji kote Kenya vijijini. Kutoka kazi za msimu hadi nafasi za kudumu.',
                        image: 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)',
                        readMoreText: currentLanguage === 'en' ? 'Read More â†’' : 'Soma Zaidi â†’',
                        fullContent: currentLanguage === 'en' ? 
                            `<div class="blog-full-image" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);"></div>
                            <h2 class="blog-full-title">Agriculture Opportunities Growing in Rural Areas</h2>
                            <div class="blog-full-content">
                                <p>The agricultural sector in rural Kenya is experiencing significant growth, creating numerous job opportunities for local workers. With the government's increased focus on food security and agricultural modernization, there's never been a better time to explore careers in this field.</p>
                                
                                <h3>Types of Agricultural Jobs Available</h3>
                                <p>From small-scale farming to large agricultural enterprises, various positions are available:</p>
                                <ul>
                                    <li><strong>Farm Workers:</strong> General labor on farms including planting, weeding, harvesting</li>
                                    <li><strong>Livestock Keepers:</strong> Caring for animals including cattle, goats, and poultry</li>
                                    <li><strong>Irrigation Specialists:</strong> Managing water systems for crops</li>
                                    <li><strong>Agricultural Extension Officers:</strong> Providing guidance to farmers on best practices</li>
                                    <li><strong>Produce Sorters and Packers:</strong> Preparing agricultural products for market</li>
                                </ul>
                                
                                <h3>Benefits of Agricultural Work</h3>
                                <p>Agricultural jobs offer several advantages for rural workers:</p>
                                <ul>
                                    <li>Steady income throughout the year</li>
                                    <li>Opportunity to learn valuable farming skills</li>
                                    <li>Contribution to local food production</li>
                                    <li>Potential for career advancement in agribusiness</li>
                                </ul>
                                
                                <h3>How to Find Agricultural Jobs</h3>
                                <p>Use the Kazi Mashinani platform to search for agricultural opportunities in your area. Update your profile to highlight any farming experience or skills you possess.</p>
                            </div>` :
                            `<div class="blog-full-image" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);"></div>
                            <h2 class="blog-full-title">Fursa za Kilimo Zinakua Vijijini</h2>
                            <div class="blog-full-content">
                                <p>Sekta ya kilimo vijijini nchini Kenya inakua kwa kasi, na kujenga fursa nyingi za kazi kwa wafanyikazi wa kienyeji. Kwa mwelekeo ulioongezeka wa serikali kuhusu usalama wa chakula na kisasa cha kilimo, hakuna wakati mzuri zaidi wa kuchunguza kazi katika uwanja huu.</p>
                                
                                <h3>Aina za Kazi za Kilimo Zilizopo</h3>
                                <p>Kuanzia kilimo cha wakulima wadogo hadi makampuni makubwa ya kilimo, nafasi mbalimbali zipo:</p>
                                <ul>
                                    <li><strong>Wafanyikazi wa Shambani:</strong> Kazi ya jumla shambani ikiwemo kupanda, kupalilia, na kuvuna</li>
                                    <li><strong>Wafugaji:</strong> Kutunza wanyama ikiwemo ng'ombe, mbuzi, na kuku</li>
                                    <li><strong>Wataalamu wa Umwagiliaji:</strong> Kusimamia mifumo ya maji kwa mazao</li>
                                    <li><strong>Maafisa Ugani:</strong> Kutoa mwongozo kwa wakulima kuhusu mbinu bora</li>
                                    <li><strong>Wachambuzi na Wafunga Bidhaa:</strong> Kuandaa bidhaa za kilimo kwa soko</li>
                                </ul>
                                
                                <h3>Faida za Kazi ya Kilimo</h3>
                                <p>Kazi za kilimo zinatoa faida kadhaa kwa wafanyikazi vijijini:</p>
                                <ul>
                                    <li>Mapato thabiti mwaka mzima</li>
                                    <li>Fursa ya kujifunza ujuzi wa thamani wa kilimo</li>
                                    <li>Kuchangia katika uzalishaji wa chakula wa kienyeji</li>
                                    <li>Uwezekano wa maendeleo ya kazi katika biashara ya kilimo</li>
                                </ul>
                                
                                <h3>Jinsi ya Kupata Kazi za Kilimo</h3>
                                <p>Tumia jukwaa la Kazi Mashinani kutafuta fursa za kilimo katika eneo lako. Sasisha wasifu wako kuonyesha uzoefu wowote wa kilimo au ujuzi ulionao.</p>
                            </div>`
                    },
                    {
                        id: 2,
                        title: currentLanguage === 'en' ? 'Construction Boom Creates New Jobs' : 'Ujenzi Unazua Ajira Mpya',
                        description: currentLanguage === 'en' 
                            ? 'With infrastructure development accelerating, construction jobs are plentiful in rural towns and emerging urban centers.' 
                            : 'Kwa kuongezeka kwa maendeleo ya miundombinu, kazi za ujenzi zimejaa katika miji vijijini na vituo vya mijini vinavyokua.',
                        image: 'linear-gradient(135deg, #ed8936 0%, #dd6b20 100%)',
                        readMoreText: currentLanguage === 'en' ? 'Read More â†’' : 'Soma Zaidi â†’',
                        fullContent: currentLanguage === 'en' ? 
                            `<div class="blog-full-image" style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);"></div>
                            <h2 class="blog-full-title">Construction Boom Creates New Jobs</h2>
                            <div class="blog-full-content">
                                <p>Kenya's construction industry is experiencing unprecedented growth, particularly in rural and peri-urban areas. Major infrastructure projects and private developments are creating thousands of job opportunities for skilled and unskilled workers alike.</p>
                                
                                <h3>Current Construction Opportunities</h3>
                                <p>The construction sector offers diverse roles including:</p>
                                <ul>
                                    <li><strong>General Laborers:</strong> Site preparation, material handling, and cleanup</li>
                                    <li><strong>Masons and Bricklayers:</strong> Building walls, foundations, and structures</li>
                                    <li><strong>Carpenters:</strong> Formwork, roofing, and finishing work</li>
                                    <li><strong>Plumbers and Electricians:</strong> Installing essential systems in buildings</li>
                                    <li><strong>Equipment Operators:</strong> Operating machinery for excavation and construction</li>
                                </ul>
                                
                                <h3>Skills Development</h3>
                                <p>Many construction companies now offer on-the-job training, allowing workers to develop specialized skills while earning. This creates pathways to higher-paying positions and long-term career growth.</p>
                                
                                <h3>Safety in Construction</h3>
                                <p>With the expansion of construction projects, safety remains a top priority. Proper training in safety protocols is essential for all construction workers to prevent accidents and ensure a secure working environment.</p>
                                
                                <h3>Finding Construction Work</h3>
                                <p>Use Kazi Mashinani to connect with construction companies and contractors in your area. Be sure to highlight any construction experience or relevant skills in your profile.</p>
                            </div>` :
                            `<div class="blog-full-image" style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);"></div>
                            <h2 class="blog-full-title">Ujenzi Unazua Ajira Mpya</h2>
                            <div class="blog-full-content">
                                <p>Sekta ya ujenzi nchini Kenya inakua kwa kiwango kisichokuwa na kisingizio, hasa katika maeneo ya vijijini na pembezoni mwa miji. Miradi mikuu ya miundombinu na maendeleo ya kibinafsi inajenga maelfu ya fursa za kazi kwa wafanyikazi wenye ujuzi na wasio na ujuzi sawa.</p>
                                
                                <h3>Fursa za Sasa za Ujenzi</h3>
                                <p>Sekta ya ujenzi inatoa majukumu mbalimbali ikiwemo:</p>
                                <ul>
                                    <li><strong>Wafanyikazi wa Jumla:</strong> Kuandaa tovuti, usimamizi wa nyenzo, na usafishaji</li>
                                    <li><strong>Washi na Wajenzi:</strong> Kujenga kuta, misingi, na miundo</li>
                                    <li><strong>Seremala:</strong> Kazi za umbo, paa, na kumaliza</li>
                                    <li><strong>Fundi Bomba na Umeme:</strong> Kusanidi mifumo muhimu katika majengo</li>
                                    <li><strong>Waendeshaji wa Vifaa:</strong> Kuendesha mashine za kuchimba na ujenzi</li>
                                </ul>
                                
                                <h3>Maendeleo ya Ujuzi</h3>
                                <p>Makampuni mengi ya ujenzi sasa yanatoa mafunzo wakati wa kazi, yakiruhusu wafanyikazi kukuza ujuzi maalum huku wakipata mshahara. Hii inajenga njia za kufikia nafasi za malipo ya juu na ukuaji wa kazi wa muda mrefu.</p>
                                
                                <h3>Usalama Katika Ujenzi</h3>
                                <p>Kwa upanuzi wa miradi ya ujenzi, usalama bado ni kipaumbele cha kwanza. Mafunzo sahihi ya kanuni za usalama ni muhimu kwa wafanyikazi wote wa ujenzi ili kuzuia ajali na kuhakikisha mazingira salama ya kufanya kazi.</p>
                                
                                <h3>Kupata Kazi ya Ujenzi</h3>
                                <p>Tumia Kazi Mashinani kuunganisha na makampuni ya ujenzi na wakandarasi katika eneo lako. Hakikisha kuonyesha uzoefu wowote wa ujenzi au ujuzi unaohusika katika wasifu wako.</p>
                            </div>`
                    },
                    {
                        id: 3,
                        title: currentLanguage === 'en' ? 'Domestic Work Opportunities' : 'Fursa za Kazi ya Nyumbani',
                        description: currentLanguage === 'en' 
                            ? 'Reliable domestic helpers are in high demand. Learn about the requirements and benefits of domestic work positions.' 
                            : 'Wasaidizi wa nyumbani wa kuaminika wana hitaji kubwa. Jifunze kuhusu mahitaji na faida za nafasi za kazi ya nyumbani.',
                        image: 'linear-gradient(135deg, #9f7aea 0%, #805ad5 100%)',
                        readMoreText: currentLanguage === 'en' ? 'Read More â†’' : 'Soma Zaidi â†’',
                        fullContent: currentLanguage === 'en' ? 
                            `<div class="blog-full-image" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);"></div>
                            <h2 class="blog-full-title">Domestic Work Opportunities</h2>
                            <div class="blog-full-content">
                                <p>Domestic work remains one of the most stable employment sectors in Kenya, with consistent demand for reliable household help. As urban centers expand and more families require assistance with household chores, opportunities in this field continue to grow.</p>
                                
                                <h3>Types of Domestic Work Available</h3>
                                <p>Domestic work encompasses various roles including:</p>
                                <ul>
                                    <li><strong>Housekeepers/Cleaners:</strong> Maintaining cleanliness and organization in homes</li>
                                    <li><strong>Nannies/Childminders:</strong> Caring for children and supporting their development</li>
                                    <li><strong>Cook/Chefs:</strong> Preparing meals for families</li>
                                    <li><strong>Gardeners:</strong> Maintaining outdoor spaces and gardens</li>
                                    <li><strong>Elderly Caregivers:</strong> Providing companionship and assistance to seniors</li>
                                </ul>
                                
                                <h3>Skills and Qualities for Success</h3>
                                <p>Successful domestic workers typically possess:</p>
                                <ul>
                                    <li>Reliability and trustworthiness</li>
                                    <li>Good communication skills</li>
                                    <li>Basic cooking and cleaning abilities</li>
                                    <li>Patience and empathy (especially for care roles)</li>
                                    <li>Understanding of household safety</li>
                                </ul>
                                
                                <h3>Rights and Responsibilities</h3>
                                <p>Domestic workers have specific rights under Kenyan labor laws, including fair wages, reasonable working hours, and safe working conditions. Understanding these rights is crucial for both workers and employers.</p>
                                
                                <h3>Finding Domestic Work</h3>
                                <p>Kazi Mashinani connects domestic workers with families seeking help. Create a detailed profile highlighting your experience, skills, and availability to increase your chances of finding suitable employment.</p>
                            </div>` :
                            `<div class="blog-full-image" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);"></div>
                            <h2 class="blog-full-title">Fursa za Kazi ya Nyumbani</h2>
                            <div class="blog-full-content">
                                <p>Kazi ya nyumbani bado ni moja ya sekta thabiti za ajira nchini Kenya, na kuna mahitaji thabiti ya msaada wa kuaminika wa kaya. Kwa kuongezeka kwa vituo vya mijini na familia zaidi zinazohitaji msaada kwa kazi za nyumbani, fursa katika uwanja huu zinaendelea kukua.</p>
                                
                                <h3>Aina za Kazi ya Nyumbani Zilizopo</h3>
                                <p>Kazi ya nyumbani inajumuisha majukumu mbalimbali ikiwemo:</p>
                                <ul>
                                    <li><strong>Wasaidizi wa Nyumbani/Wasafishaji:</strong> Kudumia usafi na mpangilio nyumbani</li>
                                    <li><strong>Yaya/Walezi wa Watoto:</strong> Kutunza watoto na kusaidia ukuaji wao</li>
                                    <li><strong>Wapishi:</strong> Kuandaa vyakula kwa familia</li>
                                    <li><strong>Walamishi wa Bustani:</strong> Kudumia nafasi za nje na bustani</li>
                                    <li><strong>Walezi wa Wazee:</strong> Kutoa ushirika na msaada kwa wazee</li>
                                </ul>
                                
                                <h3>Ujuzi na Sifa za Mafanikio</h3>
                                <p>Wafanyikazi wa nyumbani waliofanikiwa kwa kawaida wana:</p>
                                <ul>
                                    <li>Kuaminika na kuwa wa kuaminika</li>
                                    <li>Ujuzi mzuri wa mawasiliano</li>
                                    <li>Uwezo wa msingi wa kupikia na kusafisha</li>
                                    <li>Uvumilivu na huruma (hasa kwa majukumu ya utunzaji)</li>
                                    <li>Uelewa wa usalama wa nyumbani</li>
                                </ul>
                                
                                <h3>Haki na Majukumu</h3>
                                <p>Wafanyikazi wa nyumbani wana haki maalum chini ya sheria za kazi za Kenya, ikiwemo ujira mwafaka, masaa mazuri ya kazi, na hali salama za kufanya kazi. Kuelewa haki hizi ni muhimu kwa wafanyikazi na waajiri.</p>
                                
                                <h3>Kupata Kazi ya Nyumbani</h3>
                                <p>Kazi Mashinani inaunganisha wafanyikazi wa nyumbani na familia zinazotafuta msaada. Unda wasifu wa kina ukionyesha uzoefu wako, ujuzi, na upatikanaji ili kuongeza nafasi zako za kupata ajira inayofaa.</p>
                            </div>`
                    }
                ];

                const container = document.getElementById('blogContent');
                container.innerHTML = blogData.map(blog => `
                    <div class="blog-card">
                        <div class="blog-image" style="background: ${blog.image};"></div>
                        <div class="blog-content">
                            <div class="blog-title">${blog.title}</div>
                            <div class="blog-description">${blog.description}</div>
                            <a href="#" class="blog-read-more" onclick="openBlogModal(${blog.id})">
                                ${blog.readMoreText}
                            </a>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading blogs:', error);
            }
        }

        function openBlogModal(blogId) {
            // In a real app, this would fetch the full blog content from an API
            // For now, we'll use the sample data
            const blogData = [
                {
                    id: 1,
                    title: currentLanguage === 'en' ? 'Agriculture Opportunities Growing in Rural Areas' : 'Fursa za Kilimo Zinakua Vijijini',
                    fullContent: currentLanguage === 'en' ? 
                        `<div class="blog-full-image" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);"></div>
                        <h2 class="blog-full-title">Agriculture Opportunities Growing in Rural Areas</h2>
                        <div class="blog-full-content">
                            <p>The agricultural sector in rural Kenya is experiencing significant growth, creating numerous job opportunities for local workers. With the government's increased focus on food security and agricultural modernization, there's never been a better time to explore careers in this field.</p>
                            
                            <h3>Types of Agricultural Jobs Available</h3>
                            <p>From small-scale farming to large agricultural enterprises, various positions are available:</p>
                            <ul>
                                <li><strong>Farm Workers:</strong> General labor on farms including planting, weeding, harvesting</li>
                                <li><strong>Livestock Keepers:</strong> Caring for animals including cattle, goats, and poultry</li>
                                <li><strong>Irrigation Specialists:</strong> Managing water systems for crops</li>
                                <li><strong>Agricultural Extension Officers:</strong> Providing guidance to farmers on best practices</li>
                                <li><strong>Produce Sorters and Packers:</strong> Preparing agricultural products for market</li>
                            </ul>
                            
                            <h3>Benefits of Agricultural Work</h3>
                            <p>Agricultural jobs offer several advantages for rural workers:</p>
                            <ul>
                                <li>Steady income throughout the year</li>
                                <li>Opportunity to learn valuable farming skills</li>
                                <li>Contribution to local food production</li>
                                <li>Potential for career advancement in agribusiness</li>
                            </ul>
                            
                            <h3>How to Find Agricultural Jobs</h3>
                            <p>Use the Kazi Mashinani platform to search for agricultural opportunities in your area. Update your profile to highlight any farming experience or skills you possess.</p>
                        </div>` :
                        `<div class="blog-full-image" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);"></div>
                        <h2 class="blog-full-title">Fursa za Kilimo Zinakua Vijijini</h2>
                        <div class="blog-full-content">
                            <p>Sekta ya kilimo vijijini nchini Kenya inakua kwa kasi, na kujenga fursa nyingi za kazi kwa wafanyikazi wa kienyeji. Kwa mwelekeo ulioongezeka wa serikali kuhusu usalama wa chakula na kisasa cha kilimo, hakuna wakati mzuri zaidi wa kuchunguza kazi katika uwanja huu.</p>
                            
                            <h3>Aina za Kazi za Kilimo Zilizopo</h3>
                            <p>Kuanzia kilimo cha wakulima wadogo hadi makampuni makubwa ya kilimo, nafasi mbalimbali zipo:</p>
                            <ul>
                                <li><strong>Wafanyikazi wa Shambani:</strong> Kazi ya jumla shambani ikiwemo kupanda, kupalilia, na kuvuna</li>
                                <li><strong>Wafugaji:</strong> Kutunza wanyama ikiwemo ng'ombe, mbuzi, na kuku</li>
                                <li><strong>Wataalamu wa Umwagiliaji:</strong> Kusimamia mifumo ya maji kwa mazao</li>
                                <li><strong>Maafisa Ugani:</strong> Kutoa mwongozo kwa wakulima kuhusu mbinu bora</li>
                                <li><strong>Wachambuzi na Wafunga Bidhaa:</strong> Kuandaa bidhaa za kilimo kwa soko</li>
                            </ul>
                            
                            <h3>Faida za Kazi ya Kilimo</h3>
                            <p>Kazi za kilimo zinatoa faida kadhaa kwa wafanyikazi vijijini:</p>
                            <ul>
                                <li>Mapato thabiti mwaka mzima</li>
                                <li>Fursa ya kujifunza ujuzi wa thamani wa kilimo</li>
                                <li>Kuchangia katika uzalishaji wa chakula wa kienyeji</li>
                                <li>Uwezekano wa maendeleo ya kazi katika biashara ya kilimo</li>
                            </ul>
                            
                            <h3>Jinsi ya Kupata Kazi za Kilimo</h3>
                            <p>Tumia jukwaa la Kazi Mashinani kutafuta fursa za kilimo katika eneo lako. Sasisha wasifu wako kuonyesha uzoefu wowote wa kilimo au ujuzi ulionao.</p>
                        </div>`
                },
                {
                    id: 2,
                    title: currentLanguage === 'en' ? 'Construction Boom Creates New Jobs' : 'Ujenzi Unazua Ajira Mpya',
                    fullContent: currentLanguage === 'en' ? 
                        `<div class="blog-full-image" style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);"></div>
                        <h2 class="blog-full-title">Construction Boom Creates New Jobs</h2>
                        <div class="blog-full-content">
                            <p>Kenya's construction industry is experiencing unprecedented growth, particularly in rural and peri-urban areas. Major infrastructure projects and private developments are creating thousands of job opportunities for skilled and unskilled workers alike.</p>
                            
                            <h3>Current Construction Opportunities</h3>
                            <p>The construction sector offers diverse roles including:</p>
                            <ul>
                                <li><strong>General Laborers:</strong> Site preparation, material handling, and cleanup</li>
                                <li><strong>Masons and Bricklayers:</strong> Building walls, foundations, and structures</li>
                                <li><strong>Carpenters:</strong> Formwork, roofing, and finishing work</li>
                                <li><strong>Plumbers and Electricians:</strong> Installing essential systems in buildings</li>
                                <li><strong>Equipment Operators:</strong> Operating machinery for excavation and construction</li>
                            </ul>
                            
                            <h3>Skills Development</h3>
                            <p>Many construction companies now offer on-the-job training, allowing workers to develop specialized skills while earning. This creates pathways to higher-paying positions and long-term career growth.</p>
                            
                            <h3>Safety in Construction</h3>
                            <p>With the expansion of construction projects, safety remains a top priority. Proper training in safety protocols is essential for all construction workers to prevent accidents and ensure a secure working environment.</p>
                            
                            <h3>Finding Construction Work</h3>
                            <p>Use Kazi Mashinani to connect with construction companies and contractors in your area. Be sure to highlight any construction experience or relevant skills in your profile.</p>
                        </div>` :
                        `<div class="blog-full-image" style="background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);"></div>
                        <h2 class="blog-full-title">Ujenzi Unazua Ajira Mpya</h2>
                        <div class="blog-full-content">
                            <p>Sekta ya ujenzi nchini Kenya inakua kwa kiwango kisichokuwa na kisingizio, hasa katika maeneo ya vijijini na pembezoni mwa miji. Miradi mikuu ya miundombinu na maendeleo ya kibinafsi inajenga maelfu ya fursa za kazi kwa wafanyikazi wenye ujuzi na wasio na ujuzi sawa.</p>
                            
                            <h3>Fursa za Sasa za Ujenzi</h3>
                            <p>Sekta ya ujenzi inatoa majukumu mbalimbali ikiwemo:</p>
                            <ul>
                                <li><strong>Wafanyikazi wa Jumla:</strong> Kuandaa tovuti, usimamizi wa nyenzo, na usafishaji</li>
                                <li><strong>Washi na Wajenzi:</strong> Kujenga kuta, misingi, na miundo</li>
                                <li><strong>Seremala:</strong> Kazi za umbo, paa, na kumaliza</li>
                                <li><strong>Fundi Bomba na Umeme:</strong> Kusanidi mifumo muhimu katika majengo</li>
                                <li><strong>Waendeshaji wa Vifaa:</strong> Kuendesha mashine za kuchimba na ujenzi</li>
                            </ul>
                            
                            <h3>Maendeleo ya Ujuzi</h3>
                            <p>Makampuni mengi ya ujenzi sasa yanatoa mafunzo wakati wa kazi, yakiruhusu wafanyikazi kukuza ujuzi maalum huku wakipata mshahara. Hii inajenga njia za kufikia nafasi za malipo ya juu na ukuaji wa kazi wa muda mrefu.</p>
                            
                            <h3>Usalama Katika Ujenzi</h3>
                            <p>Kwa upanuzi wa miradi ya ujenzi, usalama bado ni kipaumbele cha kwanza. Mafunzo sahihi ya kanuni za usalama ni muhimu kwa wafanyikazi wote wa ujenzi ili kuzuia ajali na kuhakikisha mazingira salama ya kufanya kazi.</p>
                            
                            <h3>Kupata Kazi ya Ujenzi</h3>
                            <p>Tumia Kazi Mashinani kuunganisha na makampuni ya ujenzi na wakandarasi katika eneo lako. Hakikisha kuonyesha uzoefu wowote wa ujenzi au ujuzi unaohusika katika wasifu wako.</p>
                        </div>`
                },
                {
                    id: 3,
                    title: currentLanguage === 'en' ? 'Domestic Work Opportunities' : 'Fursa za Kazi ya Nyumbani',
                    fullContent: currentLanguage === 'en' ? 
                        `<div class="blog-full-image" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);"></div>
                        <h2 class="blog-full-title">Domestic Work Opportunities</h2>
                        <div class="blog-full-content">
                            <p>Domestic work remains one of the most stable employment sectors in Kenya, with consistent demand for reliable household help. As urban centers expand and more families require assistance with household chores, opportunities in this field continue to grow.</p>
                            
                            <h3>Types of Domestic Work Available</h3>
                            <p>Domestic work encompasses various roles including:</p>
                            <ul>
                                <li><strong>Housekeepers/Cleaners:</strong> Maintaining cleanliness and organization in homes</li>
                                <li><strong>Nannies/Childminders:</strong> Caring for children and supporting their development</li>
                                <li><strong>Cook/Chefs:</strong> Preparing meals for families</li>
                                <li><strong>Gardeners:</strong> Maintaining outdoor spaces and gardens</li>
                                <li><strong>Elderly Caregivers:</strong> Providing companionship and assistance to seniors</li>
                            </ul>
                            
                            <h3>Skills and Qualities for Success</h3>
                            <p>Successful domestic workers typically possess:</p>
                            <ul>
                                <li>Reliability and trustworthiness</li>
                                <li>Good communication skills</li>
                                <li>Basic cooking and cleaning abilities</li>
                                <li>Patience and empathy (especially for care roles)</li>
                                <li>Understanding of household safety</li>
                            </ul>
                            
                            <h3>Rights and Responsibilities</h3>
                            <p>Domestic workers have specific rights under Kenyan labor laws, including fair wages, reasonable working hours, and safe working conditions. Understanding these rights is crucial for both workers and employers.</p>
                            
                            <h3>Finding Domestic Work</h3>
                            <p>Kazi Mashinani connects domestic workers with families seeking help. Create a detailed profile highlighting your experience, skills, and availability to increase your chances of finding suitable employment.</p>
                        </div>` :
                        `<div class="blog-full-image" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);"></div>
                        <h2 class="blog-full-title">Fursa za Kazi ya Nyumbani</h2>
                        <div class="blog-full-content">
                            <p>Kazi ya nyumbani bado ni moja ya sekta thabiti za ajira nchini Kenya, na kuna mahitaji thabiti ya msaada wa kuaminika wa kaya. Kwa kuongezeka kwa vituo vya mijini na familia zaidi zinazohitaji msaada kwa kazi za nyumbani, fursa katika uwanja huu zinaendelea kukua.</p>
                            
                            <h3>Aina za Kazi ya Nyumbani Zilizopo</h3>
                            <p>Kazi ya nyumbani inajumuisha majukumu mbalimbali ikiwemo:</p>
                            <ul>
                                <li><strong>Wasaidizi wa Nyumbani/Wasafishaji:</strong> Kudumia usafi na mpangilio nyumbani</li>
                                <li><strong>Yaya/Walezi wa Watoto:</strong> Kutunza watoto na kusaidia ukuaji wao</li>
                                <li><strong>Wapishi:</strong> Kuandaa vyakula kwa familia</li>
                                <li><strong>Walamishi wa Bustani:</strong> Kudumia nafasi za nje na bustani</li>
                                <li><strong>Walezi wa Wazee:</strong> Kutoa ushirika na msaada kwa wazee</li>
                            </ul>
                            
                            <h3>Ujuzi na Sifa za Mafanikio</h3>
                            <p>Wafanyikazi wa nyumbani waliofanikiwa kwa kawaida wana:</p>
                            <ul>
                                <li>Kuaminika na kuwa wa kuaminika</li>
                                <li>Ujuzi mzuri wa mawasiliano</li>
                                <li>Uwezo wa msingi wa kupikia na kusafisha</li>
                                <li>Uvumilivu na huruma (hasa kwa majukumu ya utunzaji)</li>
                                <li>Uelewa wa usalama wa nyumbani</li>
                            </ul>
                            
                            <h3>Haki na Majukumu</h3>
                            <p>Wafanyikazi wa nyumbani wana haki maalum chini ya sheria za kazi za Kenya, ikiwemo ujira mwafaka, masaa mazuri ya kazi, na hali salama za kufanya kazi. Kuelewa haki hizi ni muhimu kwa wafanyikazi na waajiri.</p>
                            
                            <h3>Kupata Kazi ya Nyumbani</h3>
                            <p>Kazi Mashinani inaunganisha wafanyikazi wa nyumbani na familia zinazotafuta msaada. Unda wasifu wa kina ukionyesha uzoefu wako, ujuzi, na upatikanaji ili kuongeza nafasi zako za kupata ajira inayofaa.</p>
                        </div>`
                }
            ];
            
            const blog = blogData.find(b => b.id === blogId);
            if (blog) {
                document.getElementById('modalBlogTitle').textContent = blog.title;
                document.getElementById('modalBlogBody').innerHTML = blog.fullContent;
                document.getElementById('blogModal').style.display = 'block';
            }
        }

        function closeBlogModal() {
            document.getElementById('blogModal').style.display = 'none';
        }

        // Job functions
        async function loadJobs() {
            try {
                console.log('Loading jobs from:', `${API_BASE_URL}/jobs`);
                const response = await fetch(`${API_BASE_URL}/jobs`);
                const data = await response.json();
                
                if (data.success) {
                    currentJobs = data.jobs;
                    displayJobs();
                    loadUserJobs();
                } else {
                    throw new Error('Failed to load jobs');
                }
            } catch (error) {
                console.error('Error loading jobs:', error);
                document.getElementById('jobListings').innerHTML = `
                    <div class="message error">
                        <i class="fas fa-exclamation-triangle"></i> 
                        <span data-en="Failed to load jobs. Please try again later." data-sw="Imeshindwa kupakia kazi. Tafadhali jaribu tena baadaye.">
                            Imeshindwa kupakia kazi. Tafadhali jaribu tena baadaye.
                        </span>
                    </div>
                `;
            }
        }

        async function loadUserJobs() {
            try {
                // Filter jobs posted by the current user
                userJobs = currentJobs.filter(job => job.employerId === currentUser._id);
                displayUserJobs();
            } catch (error) {
                console.error('Error loading user jobs:', error);
            }
        }

        function displayUserJobs() {
            const container = document.getElementById('employerJobListings');
            
            if (userJobs.length === 0) {
                container.innerHTML = `
                    <div class="message">
                        <i class="fas fa-info-circle"></i> 
                        <span data-en="You haven't posted any jobs yet." data-sw="Hujatangaza kazi yoyote bado.">
                            Hujatangaza kazi yoyote bado.
                        </span>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = userJobs.map(job => `
                <div class="job-card">
                    <div class="job-actions">
                        <button class="btn-action btn-edit" onclick="openEditJobForm('${job._id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-action btn-delete" onclick="deleteJob('${job._id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="job-header">
                        <div class="job-title">${job.title}</div>
                        <div class="job-category">${job.category}</div>
                    </div>
                    <div class="job-description">${job.description}</div>
                    <div class="job-meta">
                        <div class="meta-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${job.location}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-building"></i>
                            <span>${job.businessType || 'Individual'}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            <span>${new Date(job.postedDate).toLocaleDateString()}</span>
                        </div>
                    </div>
                    <div class="communication">
                        <span class="meta-item">
                            <i class="fas fa-phone"></i>
                            <span>${job.phone}</span>
                        </span>
                    </div>
                </div>
            `).join('');
        }

        function displayJobs() {
            const container = document.getElementById('jobListings');
            
            if (currentJobs.length === 0) {
                container.innerHTML = `
                    <div class="message">
                        <i class="fas fa-info-circle"></i> 
                        <span data-en="No jobs available at the moment. Check back later!" data-sw="Hakuna kazi zinazopatikana kwa sasa. Angalia tena baadaye!">
                            Hakuna kazi zinazopatikana kwa sasa. Angalia tena baadaye!
                        </span>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = currentJobs.map(job => `
                <div class="job-card">
                    <div class="job-header">
                        <div class="job-title">${job.title}</div>
                        <div class="job-category">${job.category}</div>
                    </div>
                    <div class="job-description">${job.description}</div>
                    <div class="job-meta">
                        <div class="meta-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${job.location}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-building"></i>
                            <span>${job.businessType || 'Individual'}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            <span>${new Date(job.postedDate).toLocaleDateString()}</span>
                        </div>
                    </div>
                    <div class="communication">
                        <a href="tel:${job.phone}" class="btn btn-call">
                            <i class="fas fa-phone"></i> <span data-en="Call" data-sw="Piga Simu">Piga Simu</span>
                        </a>
                        <a href="https://wa.me/${job.phone}?text=Hi, I am interested in the ${job.title} position" 
                           class="btn btn-whatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i> <span data-en="WhatsApp" data-sw="WhatsApp">WhatsApp</span>
                        </a>
                    </div>
                </div>
            `).join('');
        }

        function filterJobs(e) {
            e.preventDefault();
            const positionQuery = document.getElementById('positionSearch').value.toLowerCase();
            const locationQuery = document.getElementById('locationSearch').value.toLowerCase();
            
            const filteredJobs = currentJobs.filter(job => {
                const matchesPosition = job.title.toLowerCase().includes(positionQuery);
                const matchesLocation = job.location.toLowerCase().includes(locationQuery);
                
                if (positionQuery && locationQuery) {
                    return matchesPosition && matchesLocation;
                } else if (positionQuery) {
                    return matchesPosition;
                } else if (locationQuery) {
                    return matchesLocation;
                }
                return true;
            });
            
            const container = document.getElementById('jobListings');
            
            if (filteredJobs.length === 0) {
                container.innerHTML = `
                    <div class="message">
                        <i class="fas fa-info-circle"></i> 
                        <span data-en="No jobs match your search criteria." data-sw="Hakuna kazi zinazolingana na vigezo vyako vya utafutaji.">
                            Hakuna kazi zinazolingana na vigezo vyako vya utafutaji.
                        </span>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filteredJobs.map(job => `
                <div class="job-card">
                    <div class="job-header">
                        <div class="job-title">${job.title}</div>
                        <div class="job-category">${job.category}</div>
                    </div>
                    <div class="job-description">${job.description}</div>
                    <div class="job-meta">
                        <div class="meta-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${job.location}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-building"></i>
                            <span>${job.businessType || 'Individual'}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            <span>${new Date(job.postedDate).toLocaleDateString()}</span>
                        </div>
                    </div>
                    <div class="communication">
                        <a href="tel:${job.phone}" class="btn btn-call">
                            <i class="fas fa-phone"></i> <span data-en="Call" data-sw="Piga Simu">Piga Simu</span>
                        </a>
                        <a href="https://wa.me/${job.phone}?text=Hi, I am interested in the ${job.title} position" 
                           class="btn btn-whatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i> <span data-en="WhatsApp" data-sw="WhatsApp">WhatsApp</span>
                        </a>
                    </div>
                </div>
            `).join('');
        }

        async function loadEmployees() {
            try {
                console.log('Loading employees from:', `${API_BASE_URL}/employees`);
                const response = await fetch(`${API_BASE_URL}/employees`);
                const data = await response.json();
                
                if (data.success) {
                    currentEmployees = data.employees;
                    displayEmployees();
                } else {
                    throw new Error('Failed to load employees');
                }
            } catch (error) {
                console.error('Error loading employees:', error);
            }
        }

        function displayEmployees() {
            const container = document.getElementById('employeeListings');
            
            if (!currentEmployees || currentEmployees.length === 0) {
                container.innerHTML = `
                    <div class="message">
                        <i class="fas fa-info-circle"></i> 
                        <span data-en="No workers available at the moment." data-sw="Hakuna wafanyikazi walioopo kwa sasa.">
                            Hakuna wafanyikazi walioopo kwa sasa.
                        </span>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = currentEmployees.map(employee => `
                <div class="job-card">
                    <div class="job-header">
                        <div class="job-title">${employee.name}</div>
                        <div class="job-category">${employee.role}</div>
                    </div>
                    <div class="job-description">
                        <strong data-en="Specialization:" data-sw="Utaalamu:">Utaalamu:</strong> ${employee.specialization || (currentLanguage === 'en' ? 'General worker' : 'Mfanyakazi wa jumla')}
                    </div>
                    <div class="job-meta">
                        <div class="meta-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${employee.location}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-phone"></i>
                            <span>${employee.phone}</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-calendar"></i>
                            <span data-en="Joined" data-sw="Alijiunga">Alijiunga</span> ${new Date(employee.joinDate).toLocaleDateString()}
                        </div>
                    </div>
                    <div class="communication">
                        <a href="tel:${employee.phone}" class="btn btn-call">
                            <i class="fas fa-phone"></i> <span data-en="Call" data-sw="Piga Simu">Piga Simu</span>
                        </a>
                        <a href="https://wa.me/${employee.phone}?text=Hi, I have a job opportunity for you" 
                           class="btn btn-whatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i> <span data-en="WhatsApp" data-sw="WhatsApp">WhatsApp</span>
                        </a>
                    </div>
                </div>
            `).join('');
        }

        async function handleJobPost(e) {
            e.preventDefault();
            
            if (currentUser.role !== 'employer') {
                alert(currentLanguage === 'en' ? 'Only employers can post jobs' : 'Ni waajiri pekee ndio wanaweza kutangaza kazi');
                return;
            }
            
            const jobData = {
                title: document.getElementById('jobTitle').value.trim(),
                description: document.getElementById('jobDescription').value.trim(),
                location: document.getElementById('jobLocation').value.trim(),
                category: document.getElementById('jobCategory').value,
                phone: document.getElementById('jobPhone').value.trim(),
                businessType: document.getElementById('businessType').value.trim() || currentUser.name,
                employerId: currentUser._id,
                employerName: currentUser.name
            };
            
            // Format phone number
            jobData.phone = formatPhoneToStandard(jobData.phone);
            
            try {
                console.log('Posting job to:', `${API_BASE_URL}/jobs`);
                console.log('Job data:', jobData);
                
                const response = await fetch(`${API_BASE_URL}/jobs`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(jobData)
                });
                
                const data = await response.json();
                console.log('Job post response:', data);
                
                if (data.success) {
                    alert(currentLanguage === 'en' ? 'Job posted successfully!' : 'Kazi imetangazwa kikamilifu!');
                    document.getElementById('jobForm').reset();
                    loadJobs(); // Reload jobs
                    showSection('profile');
                } else {
                    throw new Error(data.error || 'Failed to post job');
                }
            } catch (error) {
                console.error('Error posting job:', error);
                alert(currentLanguage === 'en' ? 'Failed to post job. Please try again.' : 'Imeshindwa kutangaza kazi. Tafadhali jaribu tena.');
            }
        }

        function openEditJobForm(jobId) {
            const job = userJobs.find(j => j._id === jobId);
            if (!job) return;
            
            currentEditingJobId = jobId;
            
            // Fill the form with job data
            document.getElementById('jobTitle').value = job.title;
            document.getElementById('jobDescription').value = job.description;
            document.getElementById('jobLocation').value = job.location;
            document.getElementById('jobCategory').value = job.category;
            document.getElementById('jobPhone').value = job.phone;
            document.getElementById('businessType').value = job.businessType;
            
            // Change form button text
            const submitButton = document.querySelector('#jobForm button[type="submit"]');
            submitButton.innerHTML = `<i class="fas fa-save"></i> <span data-en="Update Job" data-sw="Sasisha Kazi">Sasisha Kazi</span>`;
            
            // Navigate to post job section
            showSection('post');
        }

        async function deleteJob(jobId) {
            if (confirm(currentLanguage === 'en' 
                ? 'Are you sure you want to delete this job?' 
                : 'Una uhakika unataka kufuta kazi hii?')) {
                try {
                    // In a real app, this would be an API call to delete the job
                    // For now, we'll simulate deletion by filtering it out
                    userJobs = userJobs.filter(job => job._id !== jobId);
                    currentJobs = currentJobs.filter(job => job._id !== jobId);
                    
                    alert(currentLanguage === 'en' ? 'Job deleted successfully!' : 'Kazi imefutwa kikamilifu!');
                    displayUserJobs();
                    displayJobs();
                } catch (error) {
                    console.error('Error deleting job:', error);
                    alert(currentLanguage === 'en' ? 'Failed to delete job.' : 'Imeshindwa kufuta kazi.');
                }
            }
        }

        function showSection(section) {
            // Hide all sections
            document.getElementById('homeSection').style.display = 'none';
            document.getElementById('jobsSection').style.display = 'none';
            document.getElementById('profileSection').style.display = 'none';
            document.getElementById('postJobSection').style.display = 'none';
            document.getElementById('employeesSection').style.display = 'none';
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected section and set active nav
            if (section === 'home') {
                document.getElementById('homeSection').style.display = 'block';
                document.querySelectorAll('.nav-item')[0].classList.add('active');
            } else if (section === 'jobs') {
                document.getElementById('jobsSection').style.display = 'block';
                document.querySelectorAll('.nav-item')[1].classList.add('active');
            } else if (section === 'profile') {
                document.getElementById('profileSection').style.display = 'block';
                document.querySelectorAll('.nav-item')[2].classList.add('active');
                loadProfile();
            } else if (section === 'post') {
                document.getElementById('postJobSection').style.display = 'block';
                document.querySelectorAll('.nav-item')[3].classList.add('active');
                
                // Reset form if not editing
                if (!currentEditingJobId) {
                    document.getElementById('jobForm').reset();
                    const submitButton = document.querySelector('#jobForm button[type="submit"]');
                    submitButton.innerHTML = `<i class="fas fa-paper-plane"></i> <span data-en="Post Job" data-sw="Tanga Kazi">Tanga Kazi</span>`;
                }
            } else if (section === 'employees') {
                document.getElementById('employeesSection').style.display = 'block';
                document.querySelectorAll('.nav-item')[4].classList.add('active');
            }
        }

        function loadProfile() {
            const profileContent = document.getElementById('profileContent');
            profileContent.innerHTML = `
                <div class="profile-info">
                    <h3 style="margin-bottom: 1rem; color: var(--primary-color);" data-en="Personal Information" data-sw="Taarifa Binafsi">Taarifa Binafsi</h3>
                    <div style="background: var(--light-bg); padding: 1.5rem; border-radius: 8px;">
                        <div style="margin-bottom: 1rem;">
                            <strong data-en="Name:" data-sw="Jina:">Jina:</strong> ${currentUser.name}
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <strong data-en="Phone:" data-sw="Simu:">Simu:</strong> ${currentUser.phone}
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <strong data-en="Location:" data-sw="Eneo:">Eneo:</strong> ${currentUser.location}
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <strong data-en="Role:" data-sw="Jukumu:">Jukumu:</strong> ${currentUser.role === 'employee' ? (currentLanguage === 'en' ? 'Job Seeker' : 'Mtafuta Kazi') : (currentLanguage === 'en' ? 'Employer' : 'Mwajiri')}
                        </div>
                        ${currentUser.specialization ? `
                            <div style="margin-bottom: 1rem;">
                                <strong data-en="Specialization:" data-sw="Utaalamu:">Utaalamu:</strong> ${currentUser.specialization}
                            </div>
                        ` : ''}
                        ${currentUser.jobType ? `
                            <div style="margin-bottom: 1rem;">
                                <strong data-en="Job Types:" data-sw="Aina za Kazi:">Aina za Kazi:</strong> ${currentUser.jobType}
                            </div>
                        ` : ''}
                        <div style="margin-bottom: 1rem;">
                            <strong data-en="Member since:" data-sw="Mwanachama tangu:">Mwanachama tangu:</strong> ${new Date(currentUser.joinDate).toLocaleDateString()}
                        </div>
                    </div>
                </div>
                <div class="profile-form">
                    <h3 style="margin-bottom: 1rem; color: var(--primary-color);" data-en="Account Actions" data-sw="Vitendo za Akaunti">Vitendo za Akaunti</h3>
                    <div style="background: var(--light-bg); padding: 1.5rem; border-radius: 8px;">
                        <p style="margin-bottom: 1rem;" data-en="Manage your account and preferences" data-sw="Dhibiti akaunti yako na mapendeleo">Dhibiti akaunti yako na mapendeleo</p>
                        <button class="btn-logout" onclick="logout()" style="width: 100%; margin-bottom: 0.5rem;">
                            <i class="fas fa-sign-out-alt"></i> <span data-en="Sign Out" data-sw="Toka">Toka</span>
                        </button>
                    </div>
                </div>
            `;
        }

        function formatPhoneToStandard(phone) {
            let cleanPhone = phone.replace(/\D/g, '');
            
            // Convert to 254 format for backend
            if (cleanPhone.startsWith('0')) {
                cleanPhone = '254' + cleanPhone.substring(1);
            } else if (!cleanPhone.startsWith('254')) {
                cleanPhone = '254' + cleanPhone;
            }
            
            return cleanPhone;
        }

        function contactPhone() {
            window.open('tel:+254790528837');
        }

        function contactEmail() {
            window.open('mailto:info@kazimashinani.com');
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = 'auth.html';
        }

        // Global functions
        window.showSection = showSection;
        window.logout = logout;
        window.toggleLanguage = toggleLanguage;
        window.filterJobs = filterJobs;
        window.openEditJobForm = openEditJobForm;
        window.deleteJob = deleteJob;
        window.contactPhone = contactPhone;
        window.contactEmail = contactEmail;
        window.openBlogModal = openBlogModal;
        window.closeBlogModal = closeBlogModal;

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('blogModal');
            if (event.target === modal) {
                closeBlogModal();
            }
        }
    </script>
</body>
</html>
